{"is_source_file": true, "format": "Python", "description": "This file is a FastAPI backend implementation for a simple notes management API. It defines domain models, schemas, repository interfaces and implementations, configuration settings, and REST API endpoints for CRUD operations on notes, along with health check and CORS setup.", "external_files": ["pydantic", "fastapi", "starlette.responses", "starlette.middleware.cors", "os", "json", "datetime"], "external_methods": ["os.getenv", "os.path.exists", "os.makedirs", "json.load", "json.dump", "datetime.utcnow", "datetime.fromisoformat"], "published": ["app", "health_check", "list_notes", "get_note", "create_note", "update_note", "delete_note", "settings"], "classes": [{"name": "Settings", "description": "Defines application configuration loaded from environment variables."}, {"name": "NoteBase", "description": "Schema for minimal note content, used as a base for other schemas."}, {"name": "NoteCreate", "description": "Schema for creating a new note."}, {"name": "NoteUpdate", "description": "Schema for updating an existing note."}, {"name": "Note", "description": "Schema representing a stored note with metadata."}, {"name": "AbstractNotesRepository", "description": "Abstract base class defining the notes data repository interface."}, {"name": "InMemoryNotesRepository", "description": "In-memory implementation of the notes repository with optional JSON file persistence."}], "methods": [{"name": "List[Note] list_notes(self, q: Optional[str] = None)", "description": "List all notes, optionally filtered by a query string.", "scope": "InMemoryNotesRepository", "scopeKind": "class"}, {"name": "Optional[Note] get_note(self, note_id: int)", "description": "Retrieve a specific note by ID.", "scope": "InMemoryNotesRepository", "scopeKind": "class"}, {"name": "Note create_note(self, data: NoteCreate)", "description": "Create a new note.", "scope": "InMemoryNotesRepository", "scopeKind": "class"}, {"name": "Optional[Note] update_note(self, note_id: int, data: NoteUpdate)", "description": "Update an existing note by ID.", "scope": "InMemoryNotesRepository", "scopeKind": "class"}, {"name": "bool delete_note(self, note_id: int)", "description": "Delete a note by ID.", "scope": "InMemoryNotesRepository", "scopeKind": "class"}, {"name": "health_check()", "description": "Health check endpoint to verify the service is running.", "scope": "", "scopeKind": ""}, {"name": "None __init__(self, file_path: Optional[str] = None)", "scope": "InMemoryNotesRepository", "scopeKind": "class", "description": "unavailable"}, {"name": "None _load_from_file(self)", "scope": "InMemoryNotesRepository", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] _parse_file_url(url: Optional[str])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "None _persist_to_file(self)", "scope": "InMemoryNotesRepository", "scopeKind": "class", "description": "unavailable"}, {"name": "create_note( payload: NoteCreate, repo: AbstractNotesRepository = Depends(get_repository), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "delete_note( note_id: int = Path(..., ge=1, description=\"ID of the note to delete\"), repo: AbstractNotesRepository = Depends(get_repository), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "get_note( note_id: int = Path(..., ge=1, description=\"ID of the note\"), repo: AbstractNotesRepository = Depends(get_repository), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "AbstractNotesRepository get_repository()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "lifespan(app: FastAPI)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "list_notes( q: Optional[str] = Query(default=None, description=\"Optional filter to match notes by title/content substring.\"), repo: AbstractNotesRepository = Depends(get_repository), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "update_note( note_id: int = Path(..., ge=1, description=\"ID of the note to update\"), payload: NoteUpdate = None, repo: AbstractNotesRepository = Depends(get_repository), )", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["os.getenv", "os.path.exists", "json.load", "json.dump", "datetime.utcnow", "datetime.fromisoformat", "InMemoryNotesRepository._load_from_file", "InMemoryNotesRepository._persist_to_file"], "search-terms": ["FastAPI notes API", "InMemoryNotesRepository", "NoteCreate", "NoteUpdate", "Note", "JSON persistence", "CORS configuration", "health check endpoint", "HTTPException", "dependency injection"], "state": 2, "file_id": 1, "knowledge_revision": 10, "git_revision": "006b0fc25703f4a37edd8e4186532d2abf2eee6b", "revision_history": [{"9": "006b0fc25703f4a37edd8e4186532d2abf2eee6b"}, {"10": "006b0fc25703f4a37edd8e4186532d2abf2eee6b"}], "ctags": [{"_type": "tag", "name": "AbstractNotesRepository", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^class AbstractNotesRepository:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "InMemoryNotesRepository", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^class InMemoryNotesRepository(AbstractNotesRepository):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Note", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^class Note(NoteBase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "NoteBase", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^class NoteBase(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "NoteCreate", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^class NoteCreate(NoteBase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "NoteUpdate", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^class NoteUpdate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Settings", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^class Settings(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^    def __init__(self, file_path: Optional[str] = None) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, file_path: Optional[str] = None)", "scope": "InMemoryNotesRepository", "scopeKind": "class"}, {"_type": "tag", "name": "_load_from_file", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^    def _load_from_file(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "InMemoryNotesRepository", "scopeKind": "class"}, {"_type": "tag", "name": "_parse_file_url", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^def _parse_file_url(url: Optional[str]) -> Optional[str]:$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "function", "signature": "(url: Optional[str])"}, {"_type": "tag", "name": "_persist_to_file", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^    def _persist_to_file(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "InMemoryNotesRepository", "scopeKind": "class"}, {"_type": "tag", "name": "_repo_instance", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^_repo_instance: Optional[AbstractNotesRepository] = None$/", "language": "Python", "typeref": "typename:Optional[AbstractNotesRepository]", "kind": "variable"}, {"_type": "tag", "name": "allow_credentials", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^    allow_credentials: bool = Field($/", "language": "Python", "typeref": "typename:bool", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "allow_headers", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^    allow_headers: List[str] = Field($/", "language": "Python", "typeref": "typename:List[str]", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "allow_methods", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^    allow_methods: List[str] = Field($/", "language": "Python", "typeref": "typename:List[str]", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "allow_origins", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^    allow_origins: List[str] = Field($/", "language": "Python", "typeref": "typename:List[str]", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "app_name", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^    app_name: str = Field(default=os.getenv(\"APP_NAME\", \"Simple Notes API\"))$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^    content: Optional[str] = Field(None, min_length=1, description=\"Updated content of the note\"/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "NoteUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^    content: str = Field(..., min_length=1, description=\"Content\\/body of the note\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "NoteBase", "scopeKind": "class"}, {"_type": "tag", "name": "create_note", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^    async def create_note(self, data: NoteCreate) -> Note:$/", "language": "Python", "typeref": "typename:Note", "kind": "member", "signature": "(self, data: NoteCreate)", "scope": "AbstractNotesRepository", "scopeKind": "class"}, {"_type": "tag", "name": "create_note", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^    async def create_note(self, data: NoteCreate) -> Note:$/", "language": "Python", "typeref": "typename:Note", "kind": "member", "signature": "(self, data: NoteCreate)", "scope": "InMemoryNotesRepository", "scopeKind": "class"}, {"_type": "tag", "name": "create_note", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^async def create_note($/", "language": "Python", "kind": "function", "signature": "( payload: NoteCreate, repo: AbstractNotesRepository = Depends(get_repository), )"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^    created_at: datetime = Field(..., description=\"Creation timestamp in UTC\")$/", "language": "Python", "typeref": "typename:datetime", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "delete_note", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^    async def delete_note(self, note_id: int) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "member", "signature": "(self, note_id: int)", "scope": "AbstractNotesRepository", "scopeKind": "class"}, {"_type": "tag", "name": "delete_note", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^    async def delete_note(self, note_id: int) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "member", "signature": "(self, note_id: int)", "scope": "InMemoryNotesRepository", "scopeKind": "class"}, {"_type": "tag", "name": "delete_note", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^async def delete_note($/", "language": "Python", "kind": "function", "signature": "( note_id: int = Path(..., ge=1, description=\"ID of the note to delete\"), repo: AbstractNotesRepository = Depends(get_repository), )"}, {"_type": "tag", "name": "environment", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^    environment: str = Field(default=os.getenv(\"ENVIRONMENT\", \"development\"))$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "get_note", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^    async def get_note(self, note_id: int) -> Optional[Note]:$/", "language": "Python", "typeref": "typename:Optional[Note]", "kind": "member", "signature": "(self, note_id: int)", "scope": "AbstractNotesRepository", "scopeKind": "class"}, {"_type": "tag", "name": "get_note", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^    async def get_note(self, note_id: int) -> Optional[Note]:$/", "language": "Python", "typeref": "typename:Optional[Note]", "kind": "member", "signature": "(self, note_id: int)", "scope": "InMemoryNotesRepository", "scopeKind": "class"}, {"_type": "tag", "name": "get_note", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^async def get_note($/", "language": "Python", "kind": "function", "signature": "( note_id: int = Path(..., ge=1, description=\"ID of the note\"), repo: AbstractNotesRepository = Depends(get_repository), )"}, {"_type": "tag", "name": "get_repository", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^def get_repository() -> AbstractNotesRepository:$/", "language": "Python", "typeref": "typename:AbstractNotesRepository", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^def health_check():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^    id: int = Field(..., description=\"Unique identifier for the note\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "lifespan", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^async def lifespan(app: FastAPI):$/", "language": "Python", "kind": "function", "signature": "(app: FastAPI)"}, {"_type": "tag", "name": "list_notes", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^    async def list_notes(self, q: Optional[str] = None) -> List[Note]:$/", "language": "Python", "typeref": "typename:List[Note]", "kind": "member", "signature": "(self, q: Optional[str] = None)", "scope": "AbstractNotesRepository", "scopeKind": "class"}, {"_type": "tag", "name": "list_notes", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^    async def list_notes(self, q: Optional[str] = None) -> List[Note]:$/", "language": "Python", "typeref": "typename:List[Note]", "kind": "member", "signature": "(self, q: Optional[str] = None)", "scope": "InMemoryNotesRepository", "scopeKind": "class"}, {"_type": "tag", "name": "list_notes", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^async def list_notes($/", "language": "Python", "kind": "function", "signature": "( q: Optional[str] = Query(default=None, description=\"Optional filter to match notes by title/content substring.\"), repo: AbstractNotesRepository = Depends(get_repository), )"}, {"_type": "tag", "name": "notes_db_url", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^    notes_db_url: Optional[str] = Field(default=os.getenv(\"NOTES_DB_URL\"))$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "settings", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^settings = Settings()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^    title: Optional[str] = Field(None, min_length=1, max_length=255, description=\"Updated title /", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "NoteUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^    title: str = Field(..., min_length=1, max_length=255, description=\"Title of the note\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "NoteBase", "scopeKind": "class"}, {"_type": "tag", "name": "update_note", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^    async def update_note(self, note_id: int, data: NoteUpdate) -> Optional[Note]:$/", "language": "Python", "typeref": "typename:Optional[Note]", "kind": "member", "signature": "(self, note_id: int, data: NoteUpdate)", "scope": "AbstractNotesRepository", "scopeKind": "class"}, {"_type": "tag", "name": "update_note", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^    async def update_note(self, note_id: int, data: NoteUpdate) -> Optional[Note]:$/", "language": "Python", "typeref": "typename:Optional[Note]", "kind": "member", "signature": "(self, note_id: int, data: NoteUpdate)", "scope": "InMemoryNotesRepository", "scopeKind": "class"}, {"_type": "tag", "name": "update_note", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^async def update_note($/", "language": "Python", "kind": "function", "signature": "( note_id: int = Path(..., ge=1, description=\"ID of the note to update\"), payload: NoteUpdate = None, repo: AbstractNotesRepository = Depends(get_repository), )"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/simple-notes-application-161692-161710/notes_backend/src/api/main.py", "pattern": "/^    updated_at: datetime = Field(..., description=\"Update timestamp in UTC\")$/", "language": "Python", "typeref": "typename:datetime", "kind": "variable", "scope": "Note", "scopeKind": "class"}], "hash": "568244083f984f3b448c4532b5836640", "format-version": 4, "code-base-name": "notes_backend", "filename": "notes_backend/src/api/main.py", "fields": [{"name": "Optional[AbstractNotesRepository] _repo_instance", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "bool allow_credentials", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "List[str] allow_headers", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "List[str] allow_methods", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "List[str] allow_origins", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str app_name", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] content", "scope": "NoteUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "str content", "scope": "NoteBase", "scopeKind": "class", "description": "unavailable"}, {"name": "datetime created_at", "scope": "Note", "scopeKind": "class", "description": "unavailable"}, {"name": "str environment", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "int id", "scope": "Note", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] notes_db_url", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "settings = Settings()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[str] title", "scope": "NoteUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "str title", "scope": "NoteBase", "scopeKind": "class", "description": "unavailable"}, {"name": "datetime updated_at", "scope": "Note", "scopeKind": "class", "description": "unavailable"}]}